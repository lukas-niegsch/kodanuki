#include "plugin/vulkan/input.h"
#include "engine/defines/keys.h"
#include "engine/central/archetype.h"
#include "engine/central/entity.h"
#include <GLFW/glfw3.h>
using namespace Kodanuki;

void system_key_event_receiver(GLFWwindow* window)
{
	#define UPDATE_KEY(key) \
		if (glfwGetKey(window, GLFW_##key) == GLFW_PRESS) { \
			ECS::iterate<Archetype<Require<KeyReceiver>, Produce<key>>>(); \
		}
	
	#define REMOVE_KEY(key) \
		if (glfwGetKey(window, GLFW_##key) == GLFW_RELEASE) { \
			ECS::iterate<Archetype<Require<KeyReceiver>, Consume<key>>>(); \
		}

	UPDATE_KEY(KEY_SPACE); 
	UPDATE_KEY(KEY_APOSTROPHE);
	UPDATE_KEY(KEY_COMMA);
	UPDATE_KEY(KEY_MINUS);
	UPDATE_KEY(KEY_PERIOD);
	UPDATE_KEY(KEY_SLASH);
	UPDATE_KEY(KEY_0);
	UPDATE_KEY(KEY_1);
	UPDATE_KEY(KEY_2);
	UPDATE_KEY(KEY_3);
	UPDATE_KEY(KEY_4);
	UPDATE_KEY(KEY_5);
	UPDATE_KEY(KEY_6);
	UPDATE_KEY(KEY_7);
	UPDATE_KEY(KEY_8);
	UPDATE_KEY(KEY_9);
	UPDATE_KEY(KEY_SEMICOLON);
	UPDATE_KEY(KEY_EQUAL);
	UPDATE_KEY(KEY_A);
	UPDATE_KEY(KEY_B);
	UPDATE_KEY(KEY_C);
	UPDATE_KEY(KEY_D);
	UPDATE_KEY(KEY_E);
	UPDATE_KEY(KEY_F);
	UPDATE_KEY(KEY_G);
	UPDATE_KEY(KEY_H);
	UPDATE_KEY(KEY_I);
	UPDATE_KEY(KEY_J);
	UPDATE_KEY(KEY_K);
	UPDATE_KEY(KEY_L);
	UPDATE_KEY(KEY_M);
	UPDATE_KEY(KEY_N);
	UPDATE_KEY(KEY_O);
	UPDATE_KEY(KEY_P);
	UPDATE_KEY(KEY_Q);
	UPDATE_KEY(KEY_R);
	UPDATE_KEY(KEY_S);
	UPDATE_KEY(KEY_T);
	UPDATE_KEY(KEY_U);
	UPDATE_KEY(KEY_V);
	UPDATE_KEY(KEY_W);
	UPDATE_KEY(KEY_X);
	UPDATE_KEY(KEY_Y);
	UPDATE_KEY(KEY_Z);
	UPDATE_KEY(KEY_LEFT_BRACKET);
	UPDATE_KEY(KEY_BACKSLASH);
	UPDATE_KEY(KEY_RIGHT_BRACKET);
	UPDATE_KEY(KEY_GRAVE_ACCENT);
	UPDATE_KEY(KEY_WORLD_1);
	UPDATE_KEY(KEY_WORLD_2);
	UPDATE_KEY(KEY_ESCAPE);
	UPDATE_KEY(KEY_ENTER);
	UPDATE_KEY(KEY_TAB);
	UPDATE_KEY(KEY_BACKSPACE);
	UPDATE_KEY(KEY_INSERT);
	UPDATE_KEY(KEY_DELETE);
	UPDATE_KEY(KEY_RIGHT);
	UPDATE_KEY(KEY_LEFT);
	UPDATE_KEY(KEY_DOWN);
	UPDATE_KEY(KEY_UP);
	UPDATE_KEY(KEY_PAGE_UP);
	UPDATE_KEY(KEY_PAGE_DOWN);
	UPDATE_KEY(KEY_HOME);
	UPDATE_KEY(KEY_END);
	UPDATE_KEY(KEY_CAPS_LOCK);
	UPDATE_KEY(KEY_SCROLL_LOCK);
	UPDATE_KEY(KEY_NUM_LOCK);
	UPDATE_KEY(KEY_PRINT_SCREEN);
	UPDATE_KEY(KEY_PAUSE);
	UPDATE_KEY(KEY_F1);
	UPDATE_KEY(KEY_F2);
	UPDATE_KEY(KEY_F3);
	UPDATE_KEY(KEY_F4);
	UPDATE_KEY(KEY_F5);
	UPDATE_KEY(KEY_F6);
	UPDATE_KEY(KEY_F7);
	UPDATE_KEY(KEY_F8);
	UPDATE_KEY(KEY_F9);
	UPDATE_KEY(KEY_F10);
	UPDATE_KEY(KEY_F11);
	UPDATE_KEY(KEY_F12);
	UPDATE_KEY(KEY_F13);
	UPDATE_KEY(KEY_F14);
	UPDATE_KEY(KEY_F15);
	UPDATE_KEY(KEY_F16);
	UPDATE_KEY(KEY_F17);
	UPDATE_KEY(KEY_F18);
	UPDATE_KEY(KEY_F19);
	UPDATE_KEY(KEY_F20);
	UPDATE_KEY(KEY_F21);
	UPDATE_KEY(KEY_F22);
	UPDATE_KEY(KEY_F23);
	UPDATE_KEY(KEY_F24);
	UPDATE_KEY(KEY_F25);
	UPDATE_KEY(KEY_KP_0);
	UPDATE_KEY(KEY_KP_1);
	UPDATE_KEY(KEY_KP_2);
	UPDATE_KEY(KEY_KP_3);
	UPDATE_KEY(KEY_KP_4);
	UPDATE_KEY(KEY_KP_5);
	UPDATE_KEY(KEY_KP_6);
	UPDATE_KEY(KEY_KP_7);
	UPDATE_KEY(KEY_KP_8);
	UPDATE_KEY(KEY_KP_9);
	UPDATE_KEY(KEY_KP_DECIMAL);
	UPDATE_KEY(KEY_KP_DIVIDE);
	UPDATE_KEY(KEY_KP_MULTIPLY);
	UPDATE_KEY(KEY_KP_SUBTRACT);
	UPDATE_KEY(KEY_KP_ADD);
	UPDATE_KEY(KEY_KP_ENTER);
	UPDATE_KEY(KEY_KP_EQUAL);
	UPDATE_KEY(KEY_LEFT_SHIFT);
	UPDATE_KEY(KEY_LEFT_CONTROL);
	UPDATE_KEY(KEY_LEFT_ALT);
	UPDATE_KEY(KEY_LEFT_SUPER);
	UPDATE_KEY(KEY_RIGHT_SHIFT);
	UPDATE_KEY(KEY_RIGHT_CONTROL);
	UPDATE_KEY(KEY_RIGHT_ALT);
	UPDATE_KEY(KEY_RIGHT_SUPER);
	UPDATE_KEY(KEY_MENU);

	REMOVE_KEY(KEY_SPACE); 
	REMOVE_KEY(KEY_APOSTROPHE);
	REMOVE_KEY(KEY_COMMA);
	REMOVE_KEY(KEY_MINUS);
	REMOVE_KEY(KEY_PERIOD);
	REMOVE_KEY(KEY_SLASH);
	REMOVE_KEY(KEY_0);
	REMOVE_KEY(KEY_1);
	REMOVE_KEY(KEY_2);
	REMOVE_KEY(KEY_3);
	REMOVE_KEY(KEY_4);
	REMOVE_KEY(KEY_5);
	REMOVE_KEY(KEY_6);
	REMOVE_KEY(KEY_7);
	REMOVE_KEY(KEY_8);
	REMOVE_KEY(KEY_9);
	REMOVE_KEY(KEY_SEMICOLON);
	REMOVE_KEY(KEY_EQUAL);
	REMOVE_KEY(KEY_A);
	REMOVE_KEY(KEY_B);
	REMOVE_KEY(KEY_C);
	REMOVE_KEY(KEY_D);
	REMOVE_KEY(KEY_E);
	REMOVE_KEY(KEY_F);
	REMOVE_KEY(KEY_G);
	REMOVE_KEY(KEY_H);
	REMOVE_KEY(KEY_I);
	REMOVE_KEY(KEY_J);
	REMOVE_KEY(KEY_K);
	REMOVE_KEY(KEY_L);
	REMOVE_KEY(KEY_M);
	REMOVE_KEY(KEY_N);
	REMOVE_KEY(KEY_O);
	REMOVE_KEY(KEY_P);
	REMOVE_KEY(KEY_Q);
	REMOVE_KEY(KEY_R);
	REMOVE_KEY(KEY_S);
	REMOVE_KEY(KEY_T);
	REMOVE_KEY(KEY_U);
	REMOVE_KEY(KEY_V);
	REMOVE_KEY(KEY_W);
	REMOVE_KEY(KEY_X);
	REMOVE_KEY(KEY_Y);
	REMOVE_KEY(KEY_Z);
	REMOVE_KEY(KEY_LEFT_BRACKET);
	REMOVE_KEY(KEY_BACKSLASH);
	REMOVE_KEY(KEY_RIGHT_BRACKET);
	REMOVE_KEY(KEY_GRAVE_ACCENT);
	REMOVE_KEY(KEY_WORLD_1);
	REMOVE_KEY(KEY_WORLD_2);
	REMOVE_KEY(KEY_ESCAPE);
	REMOVE_KEY(KEY_ENTER);
	REMOVE_KEY(KEY_TAB);
	REMOVE_KEY(KEY_BACKSPACE);
	REMOVE_KEY(KEY_INSERT);
	REMOVE_KEY(KEY_DELETE);
	REMOVE_KEY(KEY_RIGHT);
	REMOVE_KEY(KEY_LEFT);
	REMOVE_KEY(KEY_DOWN);
	REMOVE_KEY(KEY_UP);
	REMOVE_KEY(KEY_PAGE_UP);
	REMOVE_KEY(KEY_PAGE_DOWN);
	REMOVE_KEY(KEY_HOME);
	REMOVE_KEY(KEY_END);
	REMOVE_KEY(KEY_CAPS_LOCK);
	REMOVE_KEY(KEY_SCROLL_LOCK);
	REMOVE_KEY(KEY_NUM_LOCK);
	REMOVE_KEY(KEY_PRINT_SCREEN);
	REMOVE_KEY(KEY_PAUSE);
	REMOVE_KEY(KEY_F1);
	REMOVE_KEY(KEY_F2);
	REMOVE_KEY(KEY_F3);
	REMOVE_KEY(KEY_F4);
	REMOVE_KEY(KEY_F5);
	REMOVE_KEY(KEY_F6);
	REMOVE_KEY(KEY_F7);
	REMOVE_KEY(KEY_F8);
	REMOVE_KEY(KEY_F9);
	REMOVE_KEY(KEY_F10);
	REMOVE_KEY(KEY_F11);
	REMOVE_KEY(KEY_F12);
	REMOVE_KEY(KEY_F13);
	REMOVE_KEY(KEY_F14);
	REMOVE_KEY(KEY_F15);
	REMOVE_KEY(KEY_F16);
	REMOVE_KEY(KEY_F17);
	REMOVE_KEY(KEY_F18);
	REMOVE_KEY(KEY_F19);
	REMOVE_KEY(KEY_F20);
	REMOVE_KEY(KEY_F21);
	REMOVE_KEY(KEY_F22);
	REMOVE_KEY(KEY_F23);
	REMOVE_KEY(KEY_F24);
	REMOVE_KEY(KEY_F25);
	REMOVE_KEY(KEY_KP_0);
	REMOVE_KEY(KEY_KP_1);
	REMOVE_KEY(KEY_KP_2);
	REMOVE_KEY(KEY_KP_3);
	REMOVE_KEY(KEY_KP_4);
	REMOVE_KEY(KEY_KP_5);
	REMOVE_KEY(KEY_KP_6);
	REMOVE_KEY(KEY_KP_7);
	REMOVE_KEY(KEY_KP_8);
	REMOVE_KEY(KEY_KP_9);
	REMOVE_KEY(KEY_KP_DECIMAL);
	REMOVE_KEY(KEY_KP_DIVIDE);
	REMOVE_KEY(KEY_KP_MULTIPLY);
	REMOVE_KEY(KEY_KP_SUBTRACT);
	REMOVE_KEY(KEY_KP_ADD);
	REMOVE_KEY(KEY_KP_ENTER);
	REMOVE_KEY(KEY_KP_EQUAL);
	REMOVE_KEY(KEY_LEFT_SHIFT);
	REMOVE_KEY(KEY_LEFT_CONTROL);
	REMOVE_KEY(KEY_LEFT_ALT);
	REMOVE_KEY(KEY_LEFT_SUPER);
	REMOVE_KEY(KEY_RIGHT_SHIFT);
	REMOVE_KEY(KEY_RIGHT_CONTROL);
	REMOVE_KEY(KEY_RIGHT_ALT);
	REMOVE_KEY(KEY_RIGHT_SUPER);
	REMOVE_KEY(KEY_MENU);

	#undef UPDATE_KEY
	#undef REMOVE_KEY
}

void system_input_event_receiver(GLFWwindow* window)
{
	system_key_event_receiver(window);
}

